import { FC } from 'react'

interface ISvgOxygenCycleProgressProps {
  progress: number
}

const SvgOxygenCycleProgress: FC<ISvgOxygenCycleProgressProps> = ({
  progress,
}) => {
  const calculateCircularProgressPath = (
    cx: number,
    cy: number,
    radius: number,
    progressPercent: number,
  ) => {
    const startAngle = -90
    const endAngle = (360 * progressPercent) / 100 - 90

    const startX = cx + radius * Math.cos((Math.PI * startAngle) / 180)
    const startY = cy + radius * Math.sin((Math.PI * startAngle) / 180)
    const endX = cx + radius * Math.cos((Math.PI * endAngle) / 180)
    const endY = cy + radius * Math.sin((Math.PI * endAngle) / 180)

    const largeArcFlag = progressPercent > 50 ? 1 : 0

    return `M ${startX} ${startY} A ${radius} ${radius} 0 ${largeArcFlag} 1 ${endX} ${endY}`
  }

  const pathData = calculateCircularProgressPath(
    154,
    152,
    140,
    // 这里用 99.99999 而不是 100 是因为 100% 时圆会消失
    progress === 100 ? 99.99999 : progress,
  )

  return (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="100%"
      height="auto"
      viewBox="0 0 308 304"
      fill="none"
      // {...props}
    >
      {/* 动态进度条路径 */}
      <path d={pathData} stroke="#047857" strokeWidth="20" />
      {/* 这里是开始 SVG 的其它部分，根据原始文件内容填充 */}

      {/* 这里使用 circle 重新画了一个类似的圆以确保动态画的圆可以与 circle的重合 */}
      {/* <path
        stroke="#006837"
        strokeMiterlimit={10}
        strokeWidth={20}
        d="M161.005 283.611c75.665 0 137.004-61.25 137.004-136.806C298.009 71.25 236.67 10 161.005 10 85.339 10 24 71.25 24 146.805c0 75.556 61.34 136.806 137.005 136.806Z"
        opacity={0.38}
      /> */}
      <circle
        cx="154"
        cy="152"
        r="140"
        stroke="#006837"
        strokeWidth="20"
        opacity={0.38}
      />

      <path
        d="M27.1565 134.953C42.1547 134.953 54.3131 122.788 54.3131 107.782C54.3131 92.7764 42.1547 80.6118 27.1565 80.6118C12.1584 80.6118 0 92.7764 0 107.782C0 122.788 12.1584 134.953 27.1565 134.953Z"
        fill="#047857"
      />
      <path
        d="M262.308 96.1363C283.125 96.1363 300 79.2524 300 58.4251C300 37.5978 283.125 20.7139 262.308 20.7139C241.491 20.7139 224.616 37.5978 224.616 58.4251C224.616 79.2524 241.491 96.1363 262.308 96.1363Z"
        fill="#047857"
      />
      <path
        d="M194.134 304C209.132 304 221.291 291.835 221.291 276.829C221.291 261.824 209.132 249.659 194.134 249.659C179.136 249.659 166.978 261.824 166.978 276.829C166.978 291.835 179.136 304 194.134 304Z"
        fill="#047857"
      />
      <path
        d="M279.511 70.0475C280.787 70.0475 281.744 70.0534 282.702 70.0416C283.352 70.0357 283.872 70.0889 283.889 70.9579C283.907 71.8743 283.31 71.8506 282.702 71.8506C280.539 71.8565 278.37 71.8506 275.788 71.8506C277.46 69.6692 278.926 67.7005 280.462 65.7851C281.029 65.0757 281.543 64.3664 281.78 63.4796C282.046 62.4687 282.081 61.4992 280.952 60.9967C279.853 60.5119 278.766 60.7661 278.276 61.8302C277.868 62.7229 277.425 63.4204 276.544 62.8292C275.776 62.309 276.397 61.4933 276.781 60.8666C277.756 59.2527 279.918 58.561 281.662 59.294C283.393 60.0212 284.244 62.037 283.6 63.9879C282.855 66.2462 280.935 67.7183 279.511 70.0475Z"
        fill="white"
      />
      <path
        d="M259.379 42.6177C251.119 42.6295 244.3 49.5167 244.347 57.8109C244.395 66.2056 251.018 72.9332 259.349 73.0456C267.604 73.1579 274.54 66.1643 274.546 57.7223C274.558 49.5049 267.633 42.6118 259.379 42.6177ZM259.45 70.6513C252.241 70.5389 246.599 64.8873 246.67 57.8523C246.74 50.6814 252.401 44.9528 259.408 44.9528C266.481 44.9587 272.342 50.9356 272.242 58.0356C272.141 64.9642 266.262 70.7577 259.45 70.6513Z"
        fill="white"
      />
      <path
        d="M202.808 280.689C200.858 274.772 197.567 269.587 194.187 264.438C193.803 263.853 193.614 264.048 193.336 264.479C190.063 269.563 186.689 274.6 184.698 280.376C182.606 286.459 187.085 292.767 193.502 292.862C200.397 292.862 204.645 286.27 202.808 280.689ZM193.189 291.195C189.076 290.804 185.951 287.718 185.744 283.923C185.697 283.054 185.892 282.693 186.784 282.457C188.816 281.919 190.689 281.913 192.486 283.214C193.39 283.87 194.453 284.301 195.458 284.816C197.289 285.744 199.198 285.738 201.313 285.176C200.397 288.978 196.87 291.543 193.189 291.195ZM199.635 283.923C198.495 284.095 197.384 283.97 196.332 283.456C195.966 283.279 195.582 283.119 195.233 282.906C192.491 281.286 189.821 279.383 186.122 281.151C186.914 278.715 187.83 276.799 188.881 274.955C190.305 272.466 191.788 270.019 193.248 267.548C193.543 267.045 193.791 266.649 194.282 267.447C197.023 271.845 199.724 276.261 201.295 281.251C201.945 283.32 201.762 283.604 199.635 283.923Z"
        fill="white"
      />
      <path
        d="M38.5424 100.865C38.2706 99.9545 37.5852 99.5465 36.6635 99.3396C34.501 98.8548 33.0711 96.839 30.8318 96.4843C30.7313 96.4666 30.6545 96.2892 30.5659 96.1828C28.811 94.0368 24.0665 93.4811 22.2939 96.4192C22.0753 96.7739 21.8626 97.1404 21.2304 97.0104C19.2864 96.6025 17.6911 97.3473 16.3794 98.7543C16.0131 99.1445 15.6408 99.3633 15.1031 99.4106C14.1637 99.4934 13.6969 100.161 13.437 100.977C13.1947 101.74 13.3956 102.485 14.0278 102.922C14.7073 103.389 14.7368 103.969 14.7368 104.666C14.7191 108.781 14.7191 112.901 14.7309 117.016C14.7369 119.404 15.8122 120.498 18.1874 120.522C20.7636 120.545 23.3456 120.527 25.9218 120.527C28.4979 120.527 31.0799 120.533 33.656 120.527C36.2322 120.516 37.2485 119.499 37.2544 116.903C37.2662 112.789 37.2603 108.668 37.2544 104.554C37.2544 103.957 37.2543 103.46 37.8629 103.052C38.6015 102.55 38.8024 101.722 38.5424 100.865ZM21.0826 98.3997C21.9512 98.6539 22.4889 98.4292 23.0561 97.7494C25.26 95.1068 27.5466 95.0891 29.9337 97.6548C30.3295 98.0805 30.7668 98.2873 31.3458 98.3169C32.0607 98.3523 32.7402 98.5475 33.3784 99.251C28.2025 99.251 23.192 99.251 18.0102 99.251C18.9556 98.246 19.9955 98.0805 21.0826 98.3997ZM35.8658 117.152C35.8599 118.624 35.4168 119.114 33.9338 119.12C28.687 119.144 23.4402 119.144 18.1993 119.12C16.5803 119.114 16.1431 118.624 16.1371 116.969C16.1253 112.901 16.1726 108.828 16.1076 104.761C16.0899 103.697 16.4444 103.49 17.4193 103.513C20.2673 103.578 23.1152 103.537 25.9631 103.537C28.8583 103.537 31.7535 103.567 34.6428 103.519C35.535 103.502 35.9072 103.655 35.8954 104.678C35.8304 108.834 35.8717 112.996 35.8658 117.152ZM36.0195 102.136C32.628 102.148 29.2364 102.142 25.8508 102.142C22.5952 102.142 19.3396 102.142 16.0899 102.142C15.499 102.142 14.7664 102.225 14.7959 101.385C14.8196 100.634 15.5286 100.741 16.0604 100.741C22.7075 100.741 29.3487 100.741 35.9958 100.735C36.5631 100.735 37.1894 100.711 37.2189 101.444C37.2485 102.272 36.5276 102.13 36.0195 102.136Z"
        fill="white"
      />
      <path
        d="M26.353 105.749C25.9748 105.578 25.768 105.72 25.508 105.897C22.6067 107.907 21.0113 110.893 24.5567 113.984C25.0648 114.428 25.4489 114.847 25.313 115.575C25.2126 116.118 25.4016 116.39 26.0339 116.379C26.6071 116.367 26.7784 116.101 26.6839 115.634C26.5007 114.759 27.0739 114.31 27.6116 113.831C28.6575 112.903 29.4611 111.85 29.5025 110.378C29.5084 108.853 27.8243 106.429 26.353 105.749ZM26.6898 112.696C26.6898 111.951 26.6721 111.413 26.6957 110.875C26.7194 110.366 26.4594 110.272 26.028 110.29C25.6321 110.301 25.3012 110.319 25.313 110.845C25.3248 111.413 25.3189 111.98 25.3189 112.66C23.4281 110.804 23.5344 109.202 25.4844 107.736C25.8507 107.458 26.0812 107.375 26.5066 107.677C28.4093 109.042 28.5629 110.851 26.6898 112.696Z"
        fill="white"
      />
    </svg>
  )
}

export default SvgOxygenCycleProgress
